import json
import random
from datetime import datetime

# 200只基金列表
FUNDS = {
    # 宽基指数（30只）
    "110020": "易方达沪深300ETF联接A",
    "000961": "天弘沪深300指数A",
    "110003": "易方达上证50指数A",
    "001548": "天弘上证50指数A",
    "160119": "南方中证500ETF联接A",
    "110026": "易方达创业板ETF联接A",
    "003765": "广发创业板ETF联接A",
    "001632": "天弘中证500指数A",
    "161017": "富国中证500指数增强",
    "005827": "易方达蓝筹精选混合",
    "000478": "建信中证500指数增强A",
    "160706": "嘉实沪深300ETF联接A",
    "519671": "银河沪深300价值指数A",
    "000311": "景顺长城沪深300指数增强",
    "001015": "华夏沪深300指数增强A",
    "000051": "华夏沪深300ETF联接A",
    "001550": "天弘中证医药100指数A",
    "001594": "天弘中证银行指数A",
    "001595": "天弘中证证券保险指数A",
    "001631": "天弘中证食品饮料指数A",
    "001617": "天弘中证电子指数A",
    "001618": "天弘中证计算机指数A",
    "001592": "天弘中证证券指数A",
    "001616": "天弘中证大宗商品指数A",
    "005918": "天弘中证科技100指数A",
    "110011": "易方达中小盘混合",
    "006229": "易方达成长精选混合A",
    "163406": "兴全合润混合(LOF)",
    "163402": "兴全趋势投资混合(LOF)",
    "100032": "富国中证红利指数增强A",
    
    # 科技主题（40只）
    "161033": "富国中证智能汽车指数(LOF)A",
    "161028": "富国中证新能源汽车指数(LOF)A",
    "001156": "申万菱信新能源汽车主题混合",
    "001410": "信达澳银新能源产业股票",
    "001475": "易方达国防军工混合",
    "003834": "华夏能源革新股票A",
    "161024": "富国中证军工指数(LOF)A",
    "501057": "汇添富中证新能源汽车产业指数(LOF)A",
    "160225": "国泰国证新能源汽车指数(LOF)",
    "012733": "富国中证芯片产业指数(LOF)A",
    "008888": "华夏国证半导体芯片ETF联接A",
    "007300": "国联安中证全指半导体ETF联接A",
    "515030": "华夏中证新能源汽车ETF",
    "515000": "华夏中证5G通信主题ETF",
    "516160": "南方中证新能源ETF",
    "012850": "易方达中证人工智能主题ETF联接A",
    "001643": "汇丰晋信智造先锋股票A",
    "003956": "南方教育股票",
    "004854": "广发中证全指汽车指数A",
    "005689": "中欧科创主题3年封闭运作灵活配置混合",
    "006098": "华宝券商ETF联接A",
    "008281": "华夏中证新能源汽车ETF联接A",
    "009644": "易方达中证海外中国互联网50ETF联接A",
    "010014": "易方达中证人工智能主题ETF联接C",
    "011103": "汇添富中证新能源汽车产业指数(LOF)C",
    "012348": "华夏中证动漫游戏ETF联接A",
    "013402": "华夏中证云计算与大数据主题ETF联接A",
    "159995": "华夏国证半导体芯片ETF",
    "515790": "华夏中证动漫游戏ETF",
    "516110": "华夏中证人工智能主题ETF",
    "516510": "华夏中证云计算与大数据主题ETF",
    "159806": "国泰中证全指通信设备ETF",
    "159928": "汇添富中证主要消费ETF",
    "512480": "国联安中证全指半导体产品与设备ETF",
    "512760": "国泰中证全指通信设备ETF",
    "159881": "易方达中证新能源ETF",
    "512170": "华宝中证医疗ETF",
    "512690": "鹏华中证酒ETF",
    "512660": "国泰中证军工ETF",
    "512980": "广发中证传媒ETF",
    
    # 医药医疗（30只）
    "161726": "招商国证生物医药指数(LOF)A",
    "003096": "中欧医疗健康混合A",
    "110023": "易方达医疗保健行业混合",
    "000220": "富国医疗保健行业混合A",
    "001898": "易方达大健康主题混合",
    "005112": "银华中证创新药产业ETF联接A",
    "009396": "汇添富中证生物科技指数(LOF)A",
    "001717": "工银瑞信前沿医疗股票A",
    "006002": "工银瑞信医药健康行业股票A",
    "001645": "国泰大健康股票A",
    "001915": "宝盈医疗健康沪港深股票A",
    "005303": "嘉实医药健康股票A",
    "001766": "上投摩根医疗健康股票A",
    "004905": "华安安康灵活配置混合A",
    "005237": "银华医疗健康量化股票发起式A",
    "001551": "天弘中证医药100指数C",
    "003095": "中欧医疗健康混合C",
    "004075": "交银施罗德医药创新股票",
    "007255": "国泰中证生物医药ETF联接A",
    "008278": "华宝中证医疗ETF联接A",
    "010387": "易方达医药生物股票A",
    "011121": "汇添富中证生物科技指数(LOF)C",
    "012328": "华夏中证创新药产业ETF联接A",
    "159938": "广发中证全指医药卫生ETF",
    "512010": "易方达沪深300医药卫生ETF",
    "512120": "华安中证细分医药ETF",
    "512290": "国泰中证生物医药ETF",
    "512610": "嘉实中证医药卫生ETF",
    "159929": "汇添富中证医药卫生ETF",
    "002190": "农银汇理医疗保健股票",
    
    # 消费主题（30只）
    "161725": "招商中证白酒指数(LOF)A",
    "160632": "鹏华酒指数(LOF)A",
    "000248": "汇添富中证主要消费ETF联接A",
    "160222": "国泰国证食品饮料行业指数",
    "005235": "银华食品饮料量化股票发起式A",
    "001679": "前海开源中国稀缺资产混合A",
    "000083": "汇添富消费行业混合",
    "001726": "汇添富新兴消费股票A",
    "001644": "国泰大农业股票A",
    "002560": "诺安和鑫灵活配置混合",
    "001102": "前海开源国家比较优势混合",
    "002621": "中欧消费主题股票A",
    "004851": "广发医疗保健股票A",
    "007119": "广发科技先锋混合A",
    "008087": "华夏中证内地低碳经济主题ETF联接A",
    "009265": "南方优享分红灵活配置混合A",
    "159736": "嘉实中证稀土产业ETF",
    "512200": "南方中证全指房地产ETF",
    "512600": "嘉实中证主要消费ETF",
    "512800": "华宝中证银行ETF",
    "513050": "易方达中概互联50ETF",
    "515220": "煤炭ETF",
    "516970": "广发中证基建工程ETF",
    "159825": "德邦中证沪港深高股息ETF",
    "159869": "华泰柏瑞中证红利低波动ETF",
    "515180": "华夏中证全指房地产ETF",
    "515650": "富国中证消费50ETF",
    "516670": "招商中证白酒ETF",
    "512580": "广发中证环保产业ETF",
    "159737": "华夏中证消费龙头ETF",
    
    # 金融地产（20只）
    "161121": "易方达银行指数(LOF)A",
    "160628": "鹏华地产指数(LOF)A",
    "160625": "鹏华证券保险指数(LOF)A",
    "512000": "华宝中证全指证券公司ETF",
    "160218": "国泰国证房地产行业指数",
    "501029": "华宝标普中国A股红利机会指数(LOF)A",
    "007531": "易方达中证银行ETF联接A",
    "008279": "华宝中证银行ETF联接A",
    "009612": "华宝中证全指证券公司ETF联接A",
    "512070": "易方达沪深300非银ETF",
    "512640": "嘉实中证金融地产ETF",
    "515560": "易方达中证银行ETF",
    "515900": "华夏中证全指证券公司ETF",
    "159940": "广发中证全指金融地产ETF",
    "510230": "国泰上证180金融ETF",
    "159825": "德邦中证沪港深高股息ETF",
    "512070": "易方达沪深300非银ETF",
    "159940": "广发中证全指金融地产ETF",
    "512800": "华宝中证银行ETF",
    "515560": "易方达中证银行ETF",
    
    # 有色金属（15只）
    "160620": "鹏华中证A股资源产业指数(LOF)",
    "161819": "银华中证内地资源指数(LOF)",
    "160216": "国泰大宗商品配置(LOF)",
    "004856": "广发中证全指原材料ETF联接A",
    "007937": "华夏中证新能源ETF联接A",
    "159876": "博时有色金属ETF",
    "512400": "南方中证申万有色金属ETF",
    "515220": "国泰中证煤炭ETF",
    "515700": "国泰中证钢铁ETF",
    "516780": "华宝中证有色金属ETF",
    "159736": "嘉实中证稀土产业ETF",
    "516850": "华夏中证新能源ETF",
    "159755": "国泰中证钢铁ETF",
    "159876": "博时有色金属ETF",
    "512400": "南方中证申万有色金属ETF",
    
    # 黄金贵金属（10只）
    "000217": "华安黄金易ETF联接A",
    "518880": "华安黄金易ETF",
    "518800": "国泰黄金ETF",
    "159937": "博时黄金ETF",
    "159934": "易方达黄金ETF",
    "004253": "国泰黄金ETF联接A",
    "002610": "博时黄金ETF联接A",
    "002611": "博时黄金ETF联接C",
    "004254": "国泰黄金ETF联接C",
    "159812": "易方达黄金ETF",
    
    # QDII海外（25只）
    "004046": "华安纳斯达克100(QDII)",
    "040046": "华安纳斯达克100指数(QDII)",
    "161125": "易方达标普500指数(QDII-LOF)A",
    "270042": "广发纳斯达克100指数A(QDII)",
    "164906": "交银中证海外中国互联网指数(QDII-LOF)",
    "000055": "广发纳斯达克100指数A(QDII)",
    "000369": "广发全球医疗保健(QDII)",
    "001668": "汇添富全球互联混合(QDII)",
    "002423": "华宝香港中小A(QDII-LOF)",
    "003385": "工银全球美元债A(QDII)",
    "005534": "长信美国标普100等权指数(QDII)",
    "006479": "广发纳斯达克生物科技指数(QDII)",
    "007844": "华夏恒生互联网科技业ETF(QDII)联接A",
    "008975": "嘉实全球互联网股票(QDII)",
    "010393": "易方达标普信息科技指数(QDII-LOF)A",
    "011612": "易方达中证海外中国互联网50ETF联接C",
    "012868": "华夏恒生科技ETF(QDII)联接A",
    "013055": "易方达纳斯达克100ETF联接(QDII)A",
    "159605": "易方达中证海外中国互联网50ETF",
    "513100": "国泰纳斯达克100ETF",
    "513330": "华夏恒生科技ETF(QDII)",
    "513880": "华夏恒生互联网科技业ETF(QDII)",
    "159941": "广发纳斯达克100ETF",
    "513500": "博时标普500ETF(QDII)",
    "513520": "华夏恒生ETF(QDII)",
}

# 生成测试数据
results = []
for code, name in FUNDS.items():
    estimation = round(random.uniform(-3, 3), 2)
    net_value = round(random.uniform(0.8, 2.5), 4)
    
    # 生成持仓数据
    holdings = []
    num_holdings = random.randint(5, 10)
    for i in range(num_holdings):
        holdings.append({
            "股票名称": f"股票{i+1}",
            "持仓比例": round(random.uniform(3, 15), 2),
            "股票代码": f"{random.randint(600000, 603999)}"
        })
    
    results.append({
        "code": code,
        "name": name,
        "estimation": estimation,
        "net_value": net_value,
        "est_value": round(net_value * (1 + estimation/100), 4),
        "update_time": datetime.now().strftime('%Y-%m-%d %H:%M:%S'),
        "data_source": "天天基金实时",
        "holdings": holdings,
        "success": True
    })

# 生成输出
output = {
    "last_updated": datetime.now().strftime('%Y-%m-%d %H:%M:%S'),
    "total_count": len(results),
    "success_count": len(results),
    "funds": results
}

# 保存到文件
with open("data/funds.json", "w", encoding="utf-8") as f:
    json.dump(output, f, ensure_ascii=False, indent=2)

print(f"✅ 已生成 {len(results)} 只基金的测试数据！")
print(f"📊 文件保存在: data/funds.json")
